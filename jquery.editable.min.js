// jQuery.editable.js v1.1.3
// http://shokai.github.io/jQuery.editable
// (c) 2012-2015 Sho Hashimoto <hashimoto@shokai.org>
//
// Modified by Benjamin Van Ryseghem
// The MIT License
!function(t){var e=function(t){return t.replace(/</gm,"&lt;").replace(/>/gm,"&gt;")};t.fn.editable=function(r,i){if("function"!=typeof i&&(i=function(){}),"string"==typeof r)var a=this,n=r,c="input";else{if("object"!=typeof r)throw'Argument Error - jQuery.editable("click", function(){ ~~ })';var a=r.trigger||this;"string"==typeof a&&(a=t(a));var n=r.action||"click",c=r.type||"input"}var l=this,o={};return o.start=function(){a.unbind("clickhold"===n?"mousedown":n),a!==l&&a.hide();var r=l.attr("editable-src")?l.attr("editable-src"):l.text(),s=("textarea"===c?r.replace(/<br( \/)?>/gm,"\n").replace(/&gt;/gm,">").replace(/&lt;/gm,"<"):r).replace(/^\s+/,"").replace(/\s+$/,""),u=t("textarea"===c?"<textarea>":"<input>");u.val(s).css("width","textarea"===c?"100%":l.width()+l.height()).css("font-size","100%").css("margin",0).attr("id","editable_"+1*new Date).addClass("editable"),"textarea"===c&&u.css("height",l.height());var d=function(){var t=u.val().replace(/^\s+/,"").replace(/\s+$/,""),r=e(t);"textarea"===c&&(r=r.replace(/[\r\n]/gm,"<br />")),l.html(r),i({value:t,target:l,old_value:s}),o.register(),a!==l&&a.show()};u.blur(d),"input"===c&&u.keydown(function(t){13===t.keyCode&&d()}),l.html(u),u.focus()},o.register=function(){if("clickhold"===n){var t=null;a.bind("mousedown",function(e){t=setTimeout(function(){o.start(e)},500)}),a.bind("mouseup mouseout",function(){clearTimeout(t)})}else a.bind(n,o.start)},o.register(),this}}(jQuery);